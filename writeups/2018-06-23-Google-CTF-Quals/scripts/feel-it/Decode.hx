class Decode {
  public static function main():Void {
    var data = sys.io.File.getContent("data.txt")
        .split("\n")
        .map(l -> l.split(":").map(d -> Std.parseInt('0x' + d)));
    var map = [
        // dots specified right column, lowest dot first
         "000000" => " "
        ,"111100" => "#"
        ,"101011" => "$"
        ,"100100" => "-"
        ,"101000" => "."
        ,"000010" => "1"
        ,"000110" => "2"
        ,"010010" => "3"
        ,"110010" => "4"
        ,"100010" => "5"
        ,"010110" => "6"
        ,"110110" => "7"
        ,"100110" => "8"
        ,"010100" => "9"
        ,"001000" => "@"
        ,"011000" => "^"
        ,"111000" => "_"
        ,"000001" => "a"
        ,"000011" => "b"
        ,"001001" => "c"
        ,"011001" => "d"
        ,"010001" => "e"
        ,"001011" => "f"
        ,"011011" => "g"
        ,"010011" => "h"
        ,"001010" => "i"
        ,"011010" => "j"
        ,"000101" => "k"
        ,"000111" => "l"
        ,"001101" => "m"
        ,"011101" => "n"
        ,"010101" => "o"
        ,"001111" => "p"
        ,"011111" => "q"
        ,"010111" => "r"
        ,"001110" => "s"
        ,"011110" => "t"
        ,"100101" => "u"
        ,"100111" => "v"
        ,"111010" => "w"
        ,"101101" => "x"
        ,"111101" => "y"
        ,"110101" => "z"
        ,"101010" => "{"
        ,"111011" => "}"
      ];
    for (line in data) {
      Sys.println([ for (d in line) {
          var uppercase = ((d >> 6) & 1) == 1;
          var dots = [ for (i in 1...7) (d >> (6 - i)) & 1 ].join("");
          var mapped = map.exists(dots) ? map[dots] : "?";
          if (uppercase) mapped = mapped.toUpperCase();
          mapped;
        } ].join(""));
    }
  }
}
